---
- name: Symlink .ssh/config
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.ssh/config"
    dest: "{{ user_home }}/.ssh/config"
    state: link
    force: true
    follow: false

- name: Symlink .zshrc
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.zshrc"
    dest: "{{ user_home }}/.zshrc"
    state: link
    force: true
    follow: false

- name: Symlink .tmux.conf
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.tmux.conf"
    dest: "{{ user_home }}/.tmux.conf"
    state: link
    force: true
    follow: false

- name: Symlink starship.toml
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.config/starship.toml"
    dest: "{{ user_home }}/.config/starship.toml"
    state: link
    force: true
    follow: false

- name: Symlink Neovim configuration
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.config/nvim"
    dest: "{{ user_home }}/.config/nvim"
    state: link
    force: true
    follow: false

- name: Symlink .latexmkrc
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.latexmkrc"
    dest: "{{ user_home }}/.latexmkrc"
    state: link
    force: true
    follow: false

- name: Symlink .chktexrc
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.chktexrc"
    dest: "{{ user_home }}/.chktexrc"
    state: link
    force: true
    follow: false

- name: Symlink WezTerm configuration
  ansible.builtin.file:
    src: "{{ playbook_dir }}/dotfiles/.wezterm.lua"
    dest: "{{ user_home }}/.wezterm.lua"
    state: link
    force: true
    follow: false

- name: Find all files and directories in dotfiles/.claude
  ansible.builtin.find:
    paths: "{{ playbook_dir }}/dotfiles/.claude"
    file_type: any
    recurse: false
  register: claude_dotfiles

- name: Symlink .claude files and directories to ~/.claude
  ansible.builtin.file:
    src: "{{ item.path }}"
    dest: "{{ user_home }}/.claude/{{ item.path | basename }}"
    state: link
    force: true
    follow: false
  loop: "{{ claude_dotfiles.files }}"
